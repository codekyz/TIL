# Modern JavaScript Deep Dive 11~20

# 11장 원시 값과 객체의 비교

## 원시 타입(값)

- **변경 불가능한immutable 값, 즉 읽기전용**
- **변경 불가능하다는 것은 변수가 아니라 값에 대한 진술**
- 상수(const)는 재할당이 금지된 변수일 뿐, 변경 불가능한 값과 동일시 하면 안됨
- 이러한 원시 값의 특성은 데이터의 신뢰성을 보장(불변성)
- **불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경할 수 있는 방법이 없음**

### 문자열

- **자바스크립트의 문자열(String 객체) 또한 원시 타입이며 변경 불가능함** (문자열이 생성된 이후에는 변경할 수 없음을 의미)
- 문자열은 **유사 배열 객체이면서 이터러블**이므로 배열과 유사하게 각 문자에 접근 가능
  - 유사 배열 객체(array-like object) : 배열처럼 인덱스로 프로펕 ㅣ값에 접근할 수 있고 length 프로퍼티를 갖는 객체

### 값에 의한 전달

- 변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수에는 할당되는 변수의 원시 값이 복사되어 전달 => **값에 의한 전달**
- 하지만 할당받는 변수와 할당되는 변수의 값은 **다른 메모리 공간에 저장된 별개의 값**
- 따라서 값을 전달해주는 변수의 값을 변경해도 복사한 변수의 값에는 어떠한 영향도 없음
- **엄격하게 표현하면 변수에는 값이 전달되는 것이 아니라 메모리 주소가 전달되기 때문에** 값에 의한 전달이라는 용어는 오해가 있을 수 있음(변수와 같은 식별자는 값이 아니라 메모리 주소를 기억하기 때문)
- 단, 전달된 메모리 주소를 통해 메모리 공간에 접근하면 값을 참조할 수 있음
- **결국은 두 변수의 원시 값은 서로 다른 메모리 공간에 저장된 별개의 값이 되어 어느 한쪽에서 재할당을 통해 값을 변경하더라도 서로 간섭할 수 없음**

## 객체

- 자바스크립트 객체의 관리 방식 : 자바스크립트 객체는 **프로퍼티 키를 인덱스로 사용하는 해시 테이블**이라고 생각할 수 있음, 또한 V8 자바스크립트 엔진에서는 프로퍼티에 접근하기 위해 **동적탐색 대신 히든 클래스라는 방식을 사용해 성능을 보장**

### 변경 가능한 값

- **객체(참조)타입의 값, 즉 객체는 변경 가능한mutable 값**
- 객체를 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근하면 **참조reference 값(생성된 객체가 저장된 메모리 공간의 주소, 그 자체)** 에 접근
- 그리고 메모리에 저장되어 있는 **참조 값을 통해 실제 객체에 접근**
- 객체를 할당한 변수는 재할당 없이 객체를 직접 변경할 수 있음
- **객체의 부작용 : 여러 개의 식별자가 하나의 객체를 공유할 수 있음(참조에 의한 전달)**

#### 얕은shallow 복사와 깊은deep 복사

- 객체를 프로퍼티 값으로 갖는 객체의 경우
- 얕은 복사 : 한 단계까지만 복사하는 것
- 깊은 복사 : 객체에 중접되어 있는 객체까지 모두 복사하는 것
- **얕은 복사와 깊은 복사로 생성된 객체는 원본과는 다른 객체, 즉 참조 값이 다른 별개의 객체**
- 참고로 원시 값을 할당한 변수를 다른 변수에 할당하는 것을 깊은 복사, 객체를 하랑한 변수를 다른 변수에 할당하는 것을 얕은 복사라고 부르는 경우도 있음

### 참조에 의한 전달

- 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 **참조 값이 복사되어 전달** => **참조에 의한 전달**
- 두개의 변수, 두개의 식별자가 하나의 객체를 공유
- 결국 **값에 의한 전달과 참조에 의한 전달은 식별자가 기억하는 메모리 공간에 저장되어 있는 값을 복사해서 전달한다는 면에서 동일**
- 따라서 자바스크립트에는 **참조에 의한 전달은 존재하지 않고 값에 의한 전달만이 존재한다고 말할 수 있음(포인터 개념이 없기때문에)**
- **전달되는 값의 종류가 원시 값인지 참조 값인지 구별**해서 강조하는 의미에서 값에 의한 전달/참조에 의한 전달로 구분
